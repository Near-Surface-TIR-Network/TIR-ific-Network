<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIR-ific Network</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIINfQPDQyUSYNFSSj+NgfH7z9faTgSLAyF8=" crossorigin=""/>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }
        /* Tailwind CSS animations */
        @keyframes fadeInDown {
          from { opacity: 0; transform: translateY(-20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-down {
          animation: fadeInDown 1s ease-out forwards;
        }
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
          animation: fadeInUp 1s ease-out forwards;
          animation-delay: 0.2s; /* Delay for a staggered effect */
          animation-fill-mode: backwards;
        }
        @keyframes slideInLeft {
          from { opacity: 0; transform: translateX(-50px); }
          to { opacity: 1; transform: translateX(0); }
        }
        .animate-slide-in-left {
          animation: slideInLeft 0.8s ease-out forwards;
        }
        @keyframes slideInRight {
          from { opacity: 0; transform: translateX(50px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fade-in {
          animation: fadeIn 1s ease-out forwards;
        }
        .map-container {
            height: 600px; /* Or a responsive height like h-96 or h-full with parent constraints */
            width: 100%;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); /* shadow-lg */
        }
        /* Ensure Leaflet markers are visible */
        .leaflet-marker-icon {
            background-color: transparent; /* Prevent background from interfering */
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React, ReactDOM, and Babel for JSX transformation -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/4K9+sINI" crossorigin=""></script>

    <script type="text/babel">
        // --- Dummy Data for Demonstration ---
        const dummySites = [
          {
            id: 'site-001',
            name: 'Desert Research Station',
            coordinates: [34.0447, -118.2505], // Los Angeles area
            simpleDetail: 'Arid climate monitoring, soil temperature focus.',
            metadata: {
              'Site ID': 'DRS-LA-001',
              'Location': 'Mojave Desert, CA',
              'Elevation (m)': '750',
              'Installation Date': '2023-01-15',
              'Sensor Type': 'Thermistor Array',
              'Data Frequency': 'Hourly',
              'Contact Person': 'Dr. Jane Doe',
              'Affiliation': 'Desert Institute',
            },
            images: [
              'https://placehold.co/600x400/A8DADC/2C3E50?text=Site+View+1',
              'https://placehold.co/600x400/457B9D/F1FAEE?text=Sensor+Setup',
              'https://placehold.co/600x400/1D3557/F1FAEE?text=Landscape+Overview',
            ],
          },
          {
            id: 'site-002',
            name: 'Mountain Forest Outpost',
            coordinates: [40.7128, -74.0060], // New York City area
            simpleDetail: 'Forest canopy temperature, snowmelt impact.',
            metadata: {
              'Site ID': 'MFO-NY-002',
              'Location': 'Catskill Mountains, NY',
              'Elevation (m)': '1200',
              'Installation Date': '2022-06-01',
              'Sensor Type': 'Infrared Radiometer',
              'Data Frequency': '30 minutes',
              'Contact Person': 'Dr. John Smith',
              'Affiliation': 'Forest Ecology Lab',
            },
            images: [
              'https://placehold.co/600x400/A8DADC/2C3E50?text=Forest+Site+1',
              'https://placehold.co/600x400/457B9D/F1FAEE?text=Canopy+Sensors',
            ],
          },
          {
            id: 'site-003',
            name: 'Coastal Wetland Monitor',
            coordinates: [29.7604, -95.3698], // Houston area
            simpleDetail: 'Wetland surface temperature, tidal influence.',
            metadata: {
              'Site ID': 'CWM-TX-003',
              'Location': 'Galveston Bay, TX',
              'Elevation (m)': '2',
              'Installation Date': '2023-03-20',
              'Sensor Type': 'Submersible Thermistor',
              'Data Frequency': '10 minutes',
              'Contact Person': 'Dr. Emily White',
              'Affiliation': 'Coastal Research Center',
            },
            images: [
              'https://placehold.co/600x400/A8DADC/2C3E50?text=Wetland+View+1',
              'https://placehold.co/600x400/457B9D/F1FAEE?text=Water+Sensors',
              'https://placehold.co/600x400/1D3557/F1FAEE?text=Aerial+Wetland',
              'https://placehold.co/600x400/F1FAEE/1D3557?text=Marsh+Flora',
            ],
          },
        ];

        // --- SiteDetailModal Component ---
        function SiteDetailModal({ isOpen, closeModal, site }) {
          const [activeTab, setActiveTab] = React.useState('metadata');

          if (!site) return null;

          return (
            <Transition appear show={isOpen} as={React.Fragment}>
              <Dialog as="div" className="relative z-10" onClose={closeModal}>
                <Transition.Child
                  as={React.Fragment}
                  enter="ease-out duration-300"
                  enterFrom="opacity-0"
                  enterTo="opacity-100"
                  leave="ease-in duration-200"
                  leaveFrom="opacity-100"
                  leaveTo="opacity-0"
                >
                  <div className="fixed inset-0 bg-black bg-opacity-75 transition-opacity" />
                </Transition.Child>

                <div className="fixed inset-0 overflow-y-auto">
                  <div className="flex min-h-full items-center justify-center p-4 text-center">
                    <Transition.Child
                      as={React.Fragment}
                      enter="ease-out duration-300"
                      enterFrom="opacity-0 scale-95"
                      enterTo="opacity-100 scale-100"
                      leave="ease-in duration-200"
                      leaveFrom="opacity-100 scale-100"
                      leaveTo="opacity-0 scale-95"
                    >
                      <Dialog.Panel className="w-full max-w-3xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all">
                        <Dialog.Title
                          as="h3"
                          className="text-2xl font-bold leading-6 text-gray-900 mb-4"
                        >
                          {site.name} Details
                        </Dialog.Title>

                        {/* Tabs for Metadata and Images */}
                        <div className="mb-4 border-b border-gray-200">
                          <nav className="-mb-px flex space-x-8" aria-label="Tabs">
                            <button
                              onClick={() => setActiveTab('metadata')}
                              className={`${
                                activeTab === 'metadata'
                                  ? 'border-red-500 text-red-600' // Changed to TIR color
                                  : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'
                              } whitespace-nowrap py-3 px-1 border-b-2 font-medium text-lg rounded-t-md transition-colors duration-200`}
                            >
                              Metadata
                            </button>
                            <button
                              onClick={() => setActiveTab('images')}
                              className={`${
                                activeTab === 'images'
                                  ? 'border-red-500 text-red-600' // Changed to TIR color
                                  : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'
                              } whitespace-nowrap py-3 px-1 border-b-2 font-medium text-lg rounded-t-md transition-colors duration-200`}
                            >
                              Images
                            </button>
                          </nav>
                        </div>

                        {/* Tab Content */}
                        <div className="mt-2 h-96 overflow-y-auto pr-2">
                          {activeTab === 'metadata' && (
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                              {Object.entries(site.metadata).map(([key, value]) => (
                                <div key={key} className="flex flex-col">
                                  <span className="text-sm font-semibold text-gray-600">{key}:</span>
                                  <span className="text-base text-gray-800">{value}</span>
                                </div>
                              ))}
                            </div>
                          )}

                          {activeTab === 'images' && (
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                              {site.images.length > 0 ? (
                                site.images.map((image, index) => (
                                  <div key={index} className="rounded-lg overflow-hidden shadow-md">
                                    <img
                                      src={image}
                                      alt={`Site image ${index + 1}`}
                                      className="w-full h-48 object-cover"
                                      onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/600x400/FF6347/FFFFFF?text=Image+Load+Error`; }}
                                    />
                                  </div>
                                ))
                              ) : (
                                <p className="text-gray-600 col-span-full text-center py-8">No images available for this site.</p>
                              )}
                            </div>
                          )}
                        </div>

                        <div className="mt-6 flex justify-end">
                          <button
                            type="button"
                            className="inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2" // Changed to TIR color
                            onClick={closeModal}
                          >
                            Close
                          </button>
                        </div>
                      </Dialog.Panel>
                    </Transition.Child>
                  </div>
                </div>
              </Dialog>
            </Transition.Child>
          </div>
        );
        }

        // --- Navbar Component ---
        function Navbar({ navigate }) {
          return (
            <nav className="bg-gradient-to-r from-red-700 to-orange-600 text-white p-4 shadow-lg fixed w-full z-20 top-0 rounded-b-lg"> {/* Updated colors */}
              <div className="container mx-auto flex justify-between items-center">
                <h1 className="text-2xl font-bold">
                  <button onClick={() => navigate('home')} className="hover:text-yellow-200 transition-colors duration-200 flex items-center">
                    {/* Placeholder Logo Image */}
                    <img
                      src="https://placehold.co/40x40/B91C1C/FFFFFF?text=TIR"
                      alt="TIR-ific Network Logo"
                      className="w-10 h-10 mr-2 object-contain rounded-full"
                      onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/40x40/FF0000/FFFFFF?text=Logo'; }}
                    />
                    TIR-ific Network
                  </button>
                </h1>
                <ul className="flex space-x-6">
                  <li>
                    <button onClick={() => navigate('home')} className="hover:text-yellow-200 transition-colors duration-200 text-lg font-medium">Home</button>
                  </li>
                  <li>
                    <button onClick={() => navigate('map')} className="hover:text-yellow-200 transition-colors duration-200 text-lg font-medium">Map</button>
                  </li>
                  <li>
                    <button onClick={() => navigate('sites')} className="hover:text-yellow-200 transition-colors duration-200 text-lg font-medium">Sites</button>
                  </li>
                  <li>
                    <button onClick={() => navigate('about')} className="hover:text-yellow-200 transition-colors duration-200 text-lg font-medium">About</button>
                  </li>
                  <li>
                    <button onClick={() => navigate('contact')} className="hover:text-yellow-200 transition-colors duration-200 text-lg font-medium">Contact</button>
                  </li>
                </ul>
              </div>
            </nav>
          );
        }

        // --- Footer Component ---
        function Footer() {
          return (
            <footer className="bg-gray-800 text-white p-6 text-center mt-8 rounded-t-lg">
              <div className="container mx-auto">
                <p>&copy; {new Date().getFullYear()} TIR-ific Network. All rights reserved.</p>
                <p className="text-sm mt-2">Connecting the world through thermal insights.</p>
              </div>
            </footer>
          );
        }

        // --- HomePage Component ---
        function HomePage({ navigate }) {
          return (
            <div className="min-h-screen bg-gray-50 flex flex-col items-center pt-20 pb-8 font-sans">
              <header className="text-center py-16 px-4 bg-gradient-to-br from-red-600 to-orange-500 text-white w-full shadow-xl rounded-b-3xl"> {/* Updated colors */}
                <h2 className="text-5xl font-extrabold mb-4 animate-fade-in-down">
                  Welcome to the TIR-ific Network
                </h2>
                <p className="text-xl max-w-2xl mx-auto opacity-90 animate-fade-in-up">
                  Your global hub for Thermal Infrared (TIR) data and insights.
                  Explore a network of environmental monitoring stations.
                </p>
                {/* Removed "Explore Our Network Map" button */}
              </header>

              <main className="container mx-auto px-4 py-12">
                {/* About Section */}
                <section className="mb-16 bg-white p-8 rounded-2xl shadow-lg border-t-4 border-red-500 animate-slide-in-left"> {/* Updated border color */}
                  <h3 className="text-4xl font-bold text-gray-800 mb-6 text-center">About the Network</h3>
                  <div className="flex flex-col md:flex-row items-center md:space-x-8">
                    <div className="md:w-1/2 mb-6 md:mb-0">
                      <img
                        src="https://placehold.co/600x400/FF6347/FFFFFF?text=Thermal+Imaging"
                        alt="Thermal Imaging"
                        className="rounded-xl shadow-md w-full h-auto object-cover"
                      />
                    </div>
                    <div className="md:w-1/2 text-gray-700 text-lg leading-relaxed">
                      <p className="mb-4">
                        The TIR-ific Network is dedicated to advancing environmental science through comprehensive Thermal Infrared (TIR) data collection. Our distributed network of sensors provides critical insights into surface temperatures, energy balance, and ecological processes across diverse landscapes.
                      </p>
                      <p>
                        We empower researchers, policymakers, and environmental enthusiasts with accessible, high-quality thermal data to address global challenges like climate change, water resource management, and biodiversity conservation.
                      </p>
                      <button
                        onClick={() => navigate('about')}
                        className="mt-6 px-6 py-2 bg-red-600 text-white font-semibold rounded-full shadow-md hover:bg-red-700 transition-colors duration-300" // Updated button color
                      >
                        Learn More
                      </button>
                    </div>
                  </div>
                </section>

                {/* Removed "Key Features" Section */}

                {/* Call to Action: View Map */}
                <section className="text-center bg-gradient-to-r from-orange-400 to-red-500 text-white p-10 rounded-2xl shadow-xl animate-fade-in"> {/* Updated colors */}
                  <h3 className="text-4xl font-bold mb-4">Ready to See the Heat?</h3>
                  <p className="text-xl mb-8 max-w-xl mx-auto">
                    Dive into our interactive map and discover thermal data from around the globe.
                  </p>
                  <button
                    onClick={() => navigate('map')}
                    className="px-10 py-4 bg-white text-red-700 font-bold rounded-full shadow-lg hover:bg-gray-100 transform hover:scale-105 transition-all duration-300 ease-in-out text-xl" // Updated button color
                  >
                    View Live Map
                  </button>
                </section>
              </main>
            </div>
          );
        }

        // --- MapPage Component ---
        function MapPage() {
          const [selectedSite, setSelectedSite] = useState(null);
          const [isModalOpen, setIsModalOpen] = useState(false);
          const mapContainerRef = useRef(null); // Ref for the map div
          const mapInstanceRef = useRef(null); // Ref to store the map instance

          useEffect(() => {
            // Check if Leaflet is available globally before initializing
            // It's crucial that L is available on window object after script loads
            if (typeof window.L === 'undefined' || !mapContainerRef.current) {
              console.warn("Leaflet not loaded or map container not ready.");
              return;
            }

            // Initialize the map only once
            if (!mapInstanceRef.current) {
              const map = window.L.map(mapContainerRef.current).setView([20, 0], 2); // Centered, zoomed out to show world
              mapInstanceRef.current = map; // Store map instance

              // Add OpenStreetMap tile layer
              window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
              }).addTo(map);

              // Add markers for dummy sites
              dummySites.forEach(site => {
                window.L.marker(site.coordinates)
                  .addTo(map)
                  .bindPopup(`<b>${site.name}</b><br>${site.simpleDetail}`)
                  .on('click', () => handleSiteClick(site)); // Open modal on marker click
              });
            }

            // Clean up map instance on component unmount
            return () => {
              if (mapInstanceRef.current) {
                mapInstanceRef.current.remove();
                mapInstanceRef.current = null;
              }
            };
          }, []); // Empty dependency array means this runs once on mount

          const handleSiteClick = (site) => {
            setSelectedSite(site);
            setIsModalOpen(true);
          };

          const closeModal = () => {
            setIsModalOpen(false);
            setSelectedSite(null);
          };

          return (
            <div className="min-h-screen bg-gray-50 flex flex-col items-center pt-20 pb-8 font-sans">
              <header className="text-center py-16 px-4 bg-gradient-to-br from-red-600 to-orange-500 text-white w-full shadow-xl rounded-b-3xl">
                <h2 className="text-5xl font-extrabold mb-4">Global Network Map</h2>
                <p className="text-xl max-w-2xl mx-auto opacity-90">
                  Explore our distributed network of thermal infrared monitoring stations worldwide.
                  Click on a site to view detailed information, or use your mouse to zoom and pan.
                </p>
              </header>

              <main className="container mx-auto px-4 py-12 w-full flex-grow">
                <section
                  id="mapid" // Assign an ID for Leaflet to target
                  ref={mapContainerRef}
                  className="w-full bg-gray-200 rounded-xl shadow-lg map-container" // Added map-container class for styling
                >
                  {/* Leaflet map will be rendered here */}
                </section>
              </main>

              <SiteDetailModal isOpen={isModalOpen} closeModal={closeModal} site={selectedSite} />
            </div>
          );
        }

        // --- AboutPage Component ---
        function AboutPage() {
          return (
            <div className="min-h-screen bg-gray-50 flex flex-col items-center pt-20 pb-8 font-sans">
              <header className="text-center py-16 px-4 bg-gradient-to-br from-red-600 to-orange-500 text-white w-full shadow-xl rounded-b-3xl">
                <h2 className="text-5xl font-extrabold mb-4">About TIR-ific Network</h2>
                <p className="text-xl max-w-2xl mx-auto opacity-90">
                  Our mission, vision, and the science behind our thermal infrared data.
                </p>
              </header>

              <main className="container mx-auto px-4 py-12">
                <section className="bg-white p-8 rounded-2xl shadow-lg border-t-4 border-red-500 mb-8">
                  <h3 className="text-3xl font-bold text-gray-800 mb-6">Our Mission</h3>
                  <p className="text-lg text-gray-700 leading-relaxed">
                    To establish and maintain a robust, globally distributed network of thermal infrared sensors, providing high-resolution, continuous data to support environmental research, climate modeling, and sustainable resource management. We aim to make TIR data accessible and actionable for a wide range of scientific and practical applications.
                  </p>
                </section>

                <section className="bg-white p-8 rounded-2xl shadow-lg border-t-4 border-orange-500 mb-8">
                  <h3 className="text-3xl font-bold text-gray-800 mb-6">The Science of TIR</h3>
                  <div className="flex flex-col md:flex-row items-start md:space-x-8">
                    <div className="md:w-1/2 mb-6 md:mb-0">
                      <img
                        src="https://placehold.co/600x400/1D3557/F1FAEE?text=TIR+Science"
                        alt="TIR Science"
                        className="rounded-xl shadow-md w-full h-auto object-cover"
                      />
                    </div>
                    <div className="md:w-1/2 text-lg text-gray-700 leading-relaxed">
                      <p className="mb-4">
                        Thermal Infrared (TIR) radiation is emitted by all objects with a temperature above absolute zero. By measuring this radiation, we can determine the surface temperature of objects without physical contact. This non-invasive technique is crucial for studying various environmental phenomena.
                      </p>
                      <p className="mb-4">
                        Our sensors detect radiation in the 8-14 micrometer range, which is particularly useful for Earth observation as it minimizes atmospheric interference. This allows us to accurately measure land surface temperature (LST), a key parameter for understanding:
                      </p>
                      <ul className="list-disc list-inside ml-4">
                        <li>Urban Heat Island effect</li>
                        <li>Evapotranspiration in agriculture</li>
                        <li>Forest fire detection and monitoring</li>
                        <li>Water body temperature and aquatic ecosystem health</li>
                        <li>Volcanic activity and geothermal processes</li>
                      </ul>
                      <p className="mt-4">
                        The data collected by the TIR-ific Network contributes to a deeper understanding of Earth's energy balance and provides valuable inputs for climate models and environmental decision-making.
                      </p>
                    </div>
                  </div>
                </section>

                <section className="bg-white p-8 rounded-2xl shadow-lg border-t-4 border-red-500">
                  <h3 className="text-3xl font-bold text-gray-800 mb-6">Our Team</h3>
                  <p className="text-lg text-gray-700 leading-relaxed">
                    The TIR-ific Network is powered by a dedicated team of environmental scientists, engineers, and data specialists. Our diverse expertise ensures the rigorous collection, processing, and dissemination of high-quality thermal infrared data. We are committed to open science and fostering collaborations worldwide.
                  </p>
                </section>
              </main>
            </div>
          );
        }

        // --- SitesPage Component ---
        function SitesPage({ navigate }) {
          return (
            <div className="min-h-screen bg-gray-50 flex flex-col items-center pt-20 pb-8 font-sans">
              <header className="text-center py-16 px-4 bg-gradient-to-br from-red-600 to-orange-500 text-white w-full shadow-xl rounded-b-3xl">
                <h2 className="text-5xl font-extrabold mb-4">All Sites</h2>
                <p className="text-xl max-w-2xl mx-auto opacity-90">
                  A comprehensive list of all thermal infrared monitoring sites in our network.
                </p>
              </header>

              <main className="container mx-auto px-4 py-12 w-full">
                <section className="bg-white p-8 rounded-2xl shadow-lg border-t-4 border-red-500">
                  <h3 className="text-3xl font-bold text-gray-800 mb-6 text-center">Site Directory</h3>
                  <p className="text-lg text-gray-700 mb-8 text-center">
                    This page will feature a searchable and filterable directory of all our monitoring sites.
                    You'll be able to view key details, data availability, and access individual site pages here.
                  </p>
                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {dummySites.map(site => (
                      <div key={site.id} className="bg-red-50 p-6 rounded-xl shadow-md border border-red-200 flex flex-col items-center text-center">
                        <h4 className="text-xl font-semibold text-red-700 mb-2">{site.name}</h4>
                        <p className="text-gray-600 text-sm mb-4">{site.simpleDetail}</p>
                        <button
                          onClick={() => { /* In a real app, this would navigate to a specific site detail page */ }}
                          className="px-4 py-2 bg-red-600 text-white text-sm font-semibold rounded-full hover:bg-red-700 transition-colors duration-200"
                        >
                          View Site
                        </button>
                      </div>
                    ))}
                  </div>
                  <p className="mt-10 text-center text-gray-600">
                    More detailed site information and filtering options coming soon!
                  </p>
                </section>
              </main>
            </div>
          );
        }


        // --- ContactPage Component ---
        function ContactPage() {
          const [formData, setFormData] = useState({
            name: '',
            email: '',
            subject: '',
            message: '',
          });
          const [status, setStatus] = useState('');

          const handleChange = (e) => {
            const { name, value } = e.target;
            setFormData(prevData => ({ ...prevData, [name]: value }));
          };

          const handleSubmit = async (e) => {
            e.preventDefault();
            setStatus('Sending...');
            // Simulate API call
            try {
              await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate network delay
              console.log('Form data submitted:', formData);
              setStatus('Message sent successfully!');
              setFormData({ name: '', email: '', subject: '', message: '' }); // Clear form
            } catch (error) {
              console.error('Submission error:', error);
              setStatus('Failed to send message. Please try again.');
            }
          };

          return (
            <div className="min-h-screen bg-gray-50 flex flex-col items-center pt-20 pb-8 font-sans">
              <header className="text-center py-16 px-4 bg-gradient-to-br from-red-600 to-orange-500 text-white w-full shadow-xl rounded-b-3xl">
                <h2 className="text-5xl font-extrabold mb-4">Contact Us</h2>
                <p className="text-xl max-w-2xl mx-auto opacity-90">
                  We'd love to hear from you! Reach out with any questions or collaboration inquiries.
                </p>
              </header>

              <main className="container mx-auto px-4 py-12 w-full max-w-3xl">
                <section className="bg-white p-8 rounded-2xl shadow-lg border-t-4 border-red-500">
                  <h3 className="text-3xl font-bold text-gray-800 mb-6 text-center">Get in Touch</h3>
                  <form onSubmit={handleSubmit} className="space-y-6">
                    <div>
                      <label htmlFor="name" className="block text-lg font-medium text-gray-700 mb-2">Name</label>
                      <input
                        type="text"
                        id="name"
                        name="name"
                        value={formData.name}
                        onChange={handleChange}
                        required
                        className="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 text-lg"
                      />
                    </div>
                    <div>
                      <label htmlFor="email" className="block text-lg font-medium text-gray-700 mb-2">Email</label>
                      <input
                        type="email"
                        id="email"
                        name="email"
                        value={formData.email}
                        onChange={handleChange}
                        required
                        className="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 text-lg"
                      />
                    </div>
                    <div>
                      <label htmlFor="subject" className="block text-lg font-medium text-gray-700 mb-2">Subject</label>
                      <input
                        type="text"
                        id="subject"
                        name="subject"
                        value={formData.subject}
                        onChange={handleChange}
                        required
                        className="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 text-lg"
                      />
                    </div>
                    <div>
                      <label htmlFor="message" className="block text-lg font-medium text-gray-700 mb-2">Message</label>
                      <textarea
                        id="message"
                        name="message"
                        rows="5"
                        value={formData.message}
                        onChange={handleChange}
                        required
                        className="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 text-lg"
                      ></textarea>
                    </div>
                    <button
                      type="submit"
                      className="w-full px-6 py-3 bg-red-600 text-white font-bold rounded-md shadow-lg hover:bg-red-700 transform hover:scale-105 transition-all duration-300 ease-in-out text-lg"
                    >
                      Send Message
                    </button>
                    {status && (
                      <p className={`mt-4 text-center text-lg ${status.includes('successfully') ? 'text-green-600' : 'text-red-600'}`}>
                        {status}
                      </p>
                    )}
                  </form>
                </section>
              </main>
            </div>
          );
        }

        // --- Main App Component ---
        export default function App() {
          const [currentPage, setCurrentPage] = useState('home');

          const navigate = (page) => {
            setCurrentPage(page);
            window.scrollTo(0, 0); // Scroll to top on page change
          };

          return (
            <div className="min-h-screen flex flex-col">
              {/* Moved global styles here from the <head> tag */}
              <style>
                {`
                @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');
                /* Leaflet CSS is imported first to ensure its styles are overridden by Tailwind if needed */
                @import url('https://unpkg.com/leaflet@1.9.4/dist/leaflet.css');

                body {
                  font-family: 'Inter', sans-serif;
                  margin: 0;
                  padding: 0;
                  overflow-x: hidden; /* Prevent horizontal scroll */
                }
                /* Tailwind CSS animations */
                @keyframes fadeInDown {
                  from { opacity: 0; transform: translateY(-20px); }
                  to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in-down {
                  animation: fadeInDown 1s ease-out forwards;
                }
                @keyframes fadeInUp {
                  from { opacity: 0; transform: translateY(20px); }
                  to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in-up {
                  animation: fadeInUp 1s ease-out forwards;
                  animation-delay: 0.2s; /* Delay for a staggered effect */
                  animation-fill-mode: backwards;
                }
                @keyframes slideInLeft {
                  from { opacity: 0; transform: translateX(-50px); }
                  to { opacity: 1; transform: translateX(0); }
                }
                .animate-slide-in-left {
                  animation: slideInLeft 0.8s ease-out forwards;
                }
                @keyframes slideInRight {
                  from { opacity: 0; transform: translateX(50px); }
                  to { opacity: 1; transform: translateX(0); }
                }
                @keyframes fadeIn {
                  from { opacity: 0; }
                  to { opacity: 1; }
                }
                .animate-fade-in {
                  animation: fadeIn 1s ease-out forwards;
                }
                .map-container {
                    height: 600px; /* Or a responsive height like h-96 or h-full with parent constraints */
                    width: 100%;
                    border-radius: 0.75rem; /* rounded-xl */
                    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); /* shadow-lg */
                }
                /* Ensure Leaflet markers are visible */
                .leaflet-marker-icon {
                    background-color: transparent; /* Prevent background from interfering */
                }
                `}
              </style>
              <Navbar navigate={navigate} />
              <div className="flex-grow">
                {currentPage === 'home' && <HomePage navigate={navigate} />}
                {currentPage === 'map' && <MapPage />}
                {currentPage === 'about' && <AboutPage />}
                {currentPage === 'contact' && <ContactPage />}
                {/* Placeholder for 'Sites' page, which is now a full component */}
                {currentPage === 'sites' && <SitesPage navigate={navigate} />}
              </div>
              {/* Leaflet JS is loaded here */}
              <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
              <Footer />
            </div>
          );
        }
