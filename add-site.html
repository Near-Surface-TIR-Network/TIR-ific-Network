<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TIR-ific Network | Contact Us</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 font-sans">

<!-- GRADIENT NAVIGATION BAR -->
<nav class="bg-gradient-to-br from-red-600 to-orange-500 text-white sticky top-0 z-50 shadow-lg">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16 items-center">
      <div class="text-white font-extrabold text-xl">TIR-ific Network</div>

      <div class="flex items-center space-x-6"> 
        <a href="index.html" class="hover:underline">Home</a>
        <a href="map.html" class="hover:underline">Map</a>

    <!-- Sites Dropdown -->
    <div class="relative dropdown-container">
      <button onclick="toggleDropdown('sitesMenu')" class="hover:underline flex items-center gap-1 focus:outline-none">
        Sites
        <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
          <path d="M5.5 7l4.5 4.5L14.5 7z" />
        </svg>
      </button>
      <div id="sitesMenu" class="dropdown-menu absolute left-0 mt-2 bg-white text-gray-900 rounded-md shadow-lg w-40 hidden z-50">
        <a href="sites.html" class="block px-4 py-2 hover:bg-gray-100">Gallery</a>
        <a href="site-list.html" class="block px-4 py-2 hover:bg-gray-100">Site List</a>
      </div>
    </div>
    
    <!-- Add Site Dropdown -->
    <div class="relative dropdown-container">
      <button onclick="toggleDropdown('addSiteMenu')" class="hover:underline flex items-center gap-1 focus:outline-none">
        Add Site
        <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
          <path d="M5.5 7l4.5 4.5L14.5 7z" />
        </svg>
      </button>
      <div id="addSiteMenu" class="dropdown-menu absolute left-0 mt-2 bg-white text-gray-900 rounded-md shadow-lg w-48 hidden z-50">
        <a href="add-site.html" class="block px-4 py-2 hover:bg-gray-100">New Site Form</a>
        <a href="update-site.html" class="block px-4 py-2 hover:bg-gray-100">Update Site Form</a>
      </div>
    </div>
    <!-- How To Dropdown -->
    <div class="relative dropdown-container">
      <button onclick="toggleDropdown('howToMenu')" class="hover:underline flex items-center gap-1 focus:outline-none">
        How To
        <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
          <path d="M5.5 7l4.5 4.5L14.5 7z" />
        </svg>
      </button>
      <div id="howToMenu" class="dropdown-menu absolute left-0 mt-2 bg-white text-gray-900 rounded-md shadow-lg w-48 hidden z-50">
        <a href="best-practices.html" class="block px-4 py-2 hover:bg-gray-100">Best Practices</a>
        <a href="post-process.html" class="block px-4 py-2 hover:bg-gray-100">Post-Processing</a>
      </div>
    </div>
        <a href="about.html" class="hover:underline">About</a> 
        <a href="contact.html" class="hover:underline">Contact</a>
      </div>
    </div>
  </div>
</nav>

<script>
  function toggleDropdown(menuId) {
    const dropdowns = document.querySelectorAll('.dropdown-menu');
    dropdowns.forEach(dropdown => {
      if (dropdown.id === menuId) {
        dropdown.classList.toggle('hidden'); // Toggle the clicked one
      } else {
        dropdown.classList.add('hidden'); // Close all others
      }
    });
  }

  // Optional: close all dropdowns when clicking outside
  document.addEventListener('click', function(event) {
    const isClickInside = event.target.closest('.dropdown-container');
    if (!isClickInside) {
      document.querySelectorAll('.dropdown-menu').forEach(menu => menu.classList.add('hidden'));
    }
  });
</script>


  <!-- WELCOME SECTION-->
  <main class="flex justify-center items-center my-12 px-4">
    <div class="text-center bg-gradient-to-br from-red-600 to-orange-500 text-white p-10 rounded-3xl shadow-lg max-w-4xl w-full">
      <h2 class="text-5xl font-extrabold mb-4 whitespace">Add Site</h2>
      <p class="text-xl opacity-90"></p>
    </div>
  </main>

<!-- ADD SITE FORM SECTION -->
<section class="max-w-5xl mx-auto p-8 bg-white rounded-3xl shadow-xl mb-12">
  <form id="addSiteForm">
<!-- SITE ID -->
<div class="mb-4">
  <div class="flex items-center mb-1">
    <label for="siteID" class="block text-base font-medium text-gray-700 mr-2">
  Site ID <span class="text-red-500">*</span>
</label>
    <button type="button" class="text-blue-500 text-xs" onclick="toggleHelp(event, 'help-site-id')">[?]</button>
  </div>
  <p id="help-site-id" class="text-xs text-gray-600 mt-1 hidden">
    Provide a short, unique identifier for your site. For example, "HARV_BARN" for the Harvard Forest Barn Tower.
  </p>
  <input type="text" name="siteID" id="siteID" required class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
</div>


<!-- SITE NAME -->
<div class="mb-4">
  <div class="flex items-center mb-1">
        <label for="siteID" class="block text-base font-medium text-gray-700 mr-2">
  Descriptive Site Name <span class="text-red-500">*</span>
</label>
    <button type="button" class="text-blue-500 text-xs" onclick="toggleHelp(event, 'help-site-name')">[?]</button>
  </div>
  <p id="help-site-name" class="text-xs text-gray-600 mt-1 hidden">
    Provide a descriptive name for your site, including location and specific context.
    <span class="italic text-gray-500">Example: Harvard Forest Barn Tower (to distinguish from other towers at Harvard Forest).</span>
  </p>
  <input type="text" name="siteName" id="siteName" required class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
</div>

<!-- EC Tower Dropdown -->
<div class="mb-6">
  <div class="flex items-center mb-1">
    <label for="hasEC" class="block text-base font-medium text-gray-700 mr-2">
      Is there co-located eddy covariance data? <span class="text-red-500">*</span>
    </label>
    <button type="button" onclick="toggleHelp(this, 'help-ec')" class="text-blue-500 text-xs">[?]</button>
  </div>
  <p id="help-ec" class="text-sm text-gray-600 hidden">
    Select "Yes" if this site is co-located with an eddy covariance (EC) tower.
  </p>
  <select name="hasEC" id="hasEC" required onchange="toggleECFields()" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
    <option value="">Select an option</option>
    <option value="yes">Yes</option>
    <option value="no">No</option>
  </select>
</div>

<!-- EC Details - Hidden by default -->
<div id="ecDetails" class="hidden">
  <!-- EC Tower ID -->
  <div class="mb-6">
    <div class="flex items-center mb-1">
      <label for="ecID" class="block text-sm font-medium text-gray-700 mr-2">EC Tower ID</label>
      <button type="button" onclick="toggleHelp(this, 'help-ecid')" class="text-blue-500 text-xs">[?]</button>
    </div>
    <p id="help-ecid" class="text-sm text-gray-600 hidden">
      This should match the EC site identifier from AmeriFlux or ICOS (e.g., <code>US-Ha1</code>).
    </p>
    <input type="text" name="ecID" id="ecID" class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
  </div>

  <!-- EC Data Link -->
  <div class="mb-6">
    <div class="flex items-center mb-1">
      <label for="ecLink" class="block text-sm font-medium text-gray-700 mr-2">EC Data Link</label>
      <button type="button" onclick="toggleHelp(this, 'help-eclink')" class="text-blue-500 text-xs">[?]</button>
    </div>
    <p id="help-eclink" class="text-sm text-gray-600 hidden">
      Paste a link to where the EC data can be downloaded (e.g., ICOS or AmeriFlux data portal).
    </p>
    <input type="url" name="ecLink" id="ecLink" class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
  </div>
</div>


<!-- Site Status -->
<div class="mb-6">
  <div class="flex items-center mb-1">
    <label for="siteStatus" class="block text-sm font-medium text-gray-700 mr-2">
      Site Status <span class="text-red-500">*</span>
    </label>
    <button type="button" onclick="toggleHelp(this, 'help-site-status')" class="text-blue-500 text-xs">[?]</button>
  </div>
  <p id="help-site-status" class="text-sm text-gray-600 hidden">
    Select whether the site is currently collecting data. If inactive, enter the date the site stopped being operational.
  </p>
  <select name="siteStatus" id="siteStatus" required class="mt-1 block w-full border border-gray-300 rounded-md p-2" onchange="toggleDateFields()">
    <option value="">-- Select Status --</option>
    <option value="active">Active</option>
    <option value="inactive">Inactive</option>
  </select>
</div>

<!-- Date Inputs -->
<div id="dateFields" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
  <div>
    <label class="block text-sm font-medium text-gray-700">
      Start Date <span class="text-red-500">*</span>
    </label>
    <input type="date" name="startDate" id="startDate" required class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
  </div>
  <div id="endDateContainer" class="hidden">
    <label class="block text-sm font-medium text-gray-700">
      End Date <span class="text-red-500">*</span>
    </label>
    <input type="date" name="endDate" id="endDate" class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
  </div>
</div>

<!-- Contacts Section -->
<div class="mb-6">
  <div class="flex items-center mb-1">
    <label class="block text-sm font-medium text-gray-700 mr-2">
      Contact(s) <span class="text-red-500">*</span>
    </label>
    <button type="button" onclick="toggleHelp(this, 'help-contacts')" class="text-blue-500 text-xs">[?]</button>
  </div>
  <p id="help-contacts" class="text-sm text-gray-600 hidden">
    Provide the name and email of the site contact. You may add multiple contacts if more than one person is responsible for site maintenance or data.
  </p>

  <div class="space-y-4" id="contactList">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <input type="text" name="contactName[]" placeholder="First and Last Name" required class="border border-gray-300 rounded-md p-2" />
      <input type="email" name="contactEmail[]" placeholder="Email Address" required class="border border-gray-300 rounded-md p-2" />
    </div>
  </div>

  <button type="button" onclick="addContact()" class="mt-2 text-blue-600 text-sm">+ Add Another Contact</button>
</div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
  <!-- Latitude -->
  <div>
    <div class="flex items-center mb-1">
      <label for="lat" class="block text-base font-medium text-gray-700 mr-2">
        Latitude (°) <span class="text-red-500">*</span>
      </label>
      <button type="button" onclick="toggleHelp(this, 'help-lat')" class="text-blue-500 text-xs">[?]</button>
    </div>
    <p id="help-lat" class="text-sm text-gray-600 hidden">
      Enter latitude in decimal degrees. Use negative values for the Southern Hemisphere.
    </p>
    <input type="number" step="any" name="lat" id="lat" required class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
  </div>

  <!-- Longitude -->
  <div>
    <div class="flex items-center mb-1">
      <label for="long" class="block text-base font-medium text-gray-700 mr-2">
        Longitude (°) <span class="text-red-500">*</span>
      </label>
      <button type="button" onclick="toggleHelp(this, 'help-long')" class="text-blue-500 text-xs">[?]</button>
    </div>
    <p id="help-long" class="text-sm text-gray-600 hidden">
      Enter longitude in decimal degrees. Use negative values for the Western Hemisphere.
    </p>
    <input type="number" step="any" name="long" id="long" required class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
  </div>

  <!-- Elevation -->
  <div>
    <div class="flex items-center mb-1">
      <label for="elev" class="block text-base font-medium text-gray-700 mr-2">
        Elevation (m a.s.l.) <span class="text-red-500">*</span>
      </label>
      <button type="button" onclick="toggleHelp(this, 'help-elev')" class="text-blue-500 text-xs">[?]</button>
    </div>
    <p id="help-elev" class="text-sm text-gray-600 hidden">
      Enter the site elevation in meters above sea level. This should be the elevation at the base of the tower, not the camera height.
    </p>
    <input type="number" step="any" name="elev" id="elev" required class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
  </div>
</div>


    <!-- UTC Offset -->
    <div class="mb-6">
      <label class="block text-sm font-medium text-gray-700">UTC Offset</label>
      <select name="timezone" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
        <option value="-12">UTC-12</option>
        <option value="-11">UTC-11</option>
        <option value="-10">UTC-10</option>
        <option value="-9">UTC-9</option>
        <option value="-8">UTC-8</option>
        <option value="-7">UTC-7</option>
        <option value="-6">UTC-6</option>
        <option value="-5">UTC-5</option>
        <option value="-4">UTC-4</option>
        <option value="-3">UTC-3</option>
        <option value="-2">UTC-2</option>
        <option value="-1">UTC-1</option>
        <option value="0">UTC</option>
        <option value="1">UTC+1</option>
        <option value="2">UTC+2</option>
        <option value="3">UTC+3</option>
        <option value="4">UTC+4</option>
        <option value="5">UTC+5</option>
        <option value="6">UTC+6</option>
        <option value="7">UTC+7</option>
        <option value="8">UTC+8</option>
        <option value="9">UTC+9</option>
        <option value="10">UTC+10</option>
        <option value="11">UTC+11</option>
        <option value="12">UTC+12</option>
      </select>
    </div>

    <!-- Climate -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div>
        <label class="block text-sm font-medium text-gray-700">Mean Annual Temperature (°C)</label>
        <input type="number" step="any" name="MAT_site" class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Mean Annual Precipitation (cm)</label>
        <input type="number" step="any" name="MAP_site" class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
      </div>
    </div>
    
<!-- Dominant species with Help Button -->
<div class="flex items-center mb-1">
  <label class="block text-base font-medium text-gray-700 mr-2">Dominant Species</label>
  <button type="button" class="text-blue-500 text-xs" onclick="toggleHelp(event, 'help-dominant-species')">[?]</button>
</div>
<p id="help-dominant-species" class="text-xs text-gray-600 mt-1 hidden">
  List the most abundant species in view. Include both common and scientific names. You can add multiple.<br>
  <span class="italic text-gray-500">Example: Common Name: White Pine, Scientific Name: <i>Pinus strobus</i></span>
</p>


<!-- Help Text -->
<p id="help-dominant-species" class="text-xs text-gray-600 mb-2 hidden">
  List the main species in view. Include both common and scientific names. You can add multiple.<br>
  <span class="italic text-gray-500">Example: Common Name: White Pine, Scientific Name: <i>Pinus strobus</i></span>
</p>

<!-- Dynamic Species Fields -->
<div id="species-container" class="space-y-2">
  <div class="species-entry flex flex-col md:flex-row md:items-center gap-4">
    <label class="flex-1 text-sm text-gray-700">Common Name:
      <input type="text" name="species_common[]" class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
    </label>
    <label class="flex-1 text-sm text-gray-700">Scientific Name:
      <input type="text" name="species_scientific[]" class="mt-1 block w-full border border-gray-300 rounded-md p-2" />
    </label>
  </div>
</div>

<!-- Add Another Species Button -->
<button type="button" onclick="addSpecies()" class="mt-2 text-blue-600 text-sm">+ Add Another Species</button>


    <!-- Submit -->
    <div class="text-center">
      <button type="submit" class="mt-4 px-6 py-3 bg-gradient-to-br from-red-600 to-orange-500 text-white font-semibold rounded-full shadow hover:shadow-lg transition">
        Submit Site
      </button>
    </div>
  </form>
</section>

<script>
    function toggleDateFields() {
    const status = document.getElementById('siteStatus').value;
    const endDateContainer = document.getElementById('endDateContainer');
    const endDateInput = document.getElementById('endDate');
    
    if (status === "inactive") {
      endDateContainer.classList.remove("hidden");
      endDateInput.required = true;
    } else {
      endDateContainer.classList.add("hidden");
      endDateInput.required = false;
    }
  }

  function toggleHelp(button, id) {
    document.querySelectorAll('p[id^="help-"]').forEach(p => {
      if (p.id !== id) p.classList.add('hidden');
    });
    const current = document.getElementById(id);
    current.classList.toggle('hidden');
  }

  document.addEventListener('click', function(event) {
    const isHelpButton = event.target.matches('button[onclick^="toggleHelp"]');
    const isHelpText = event.target.closest('p[id^="help-"]');
    if (!isHelpButton && !isHelpText) {
      document.querySelectorAll('p[id^="help-"]').forEach(p => p.classList.add('hidden'));
    }
  });
  
  function addContact() {
    const contactList = document.getElementById('contactList');
    const contactDiv = document.createElement('div');
    contactDiv.className = "grid grid-cols-1 md:grid-cols-2 gap-4 mt-2";
    contactDiv.innerHTML = `
      <input type="text" name="contactName[]" placeholder="First and Last Name" required class="border border-gray-300 rounded-md p-2" />
      <input type="email" name="contactEmail[]" placeholder="Email Address" required class="border border-gray-300 rounded-md p-2" />
    `;
    contactList.appendChild(contactDiv);
  }

  function toggleHelp(button, id) {
    document.querySelectorAll('p[id^="help-"]').forEach(p => {
      if (p.id !== id) p.classList.add('hidden');
    });
    const current = document.getElementById(id);
    current.classList.toggle('hidden');
  }

  document.addEventListener('click', function(event) {
    const isHelpButton = event.target.matches('button[onclick^="toggleHelp"]');
    const isHelpText = event.target.closest('p[id^="help-"]');
    if (!isHelpButton && !isHelpText) {
      document.querySelectorAll('p[id^="help-"]').forEach(p => p.classList.add('hidden'));
    }
  });

  function toggleHelp(event, id) {
    event.stopPropagation(); // Prevents immediate closing on same click

    // Close all other help text
    document.querySelectorAll('p[id^="help-"]').forEach(p => {
      if (p.id !== id) p.classList.add('hidden');
    });

    // Toggle selected help text
    const current = document.getElementById(id);
    current.classList.toggle('hidden');
  }

  // Close help text when clicking outside
  document.addEventListener('click', function(event) {
    const isHelpButton = event.target.closest('button[onclick^="toggleHelp"]');
    const isHelpText = event.target.closest('p[id^="help-"]');

    if (!isHelpButton && !isHelpText) {
      document.querySelectorAll('p[id^="help-"]').forEach(p => p.classList.add('hidden'));
    }
  });
  function toggleECFields() {
    const dropdown = document.getElementById('hasEC');
    const ecDetails = document.getElementById('ecDetails');
    ecDetails.classList.toggle('hidden', dropdown.value !== 'yes');
  }

  function toggleHelp(button, id) {
    document.querySelectorAll('p[id^="help-"]').forEach(p => {
      if (p.id !== id) p.classList.add('hidden');
    });
    const current = document.getElementById(id);
    current.classList.toggle('hidden');
  }

  document.addEventListener('click', function (event) {
    const isHelpButton = event.target.matches('button[onclick^="toggleHelp"]');
    const isHelpText = event.target.closest('p[id^="help-"]');
    if (!isHelpButton && !isHelpText) {
      document.querySelectorAll('p[id^="help-"]').forEach(p => p.classList.add('hidden'));
    }
  });
  function addSpecies() {
    const container = document.getElementById('species-container');
    const newEntry = document.createElement('div');
    newEntry.className = 'species-entry';
    newEntry.innerHTML = `
      <label>Common Name: <input type="text" name="species_common[]"></label>
      <label>Scientific Name: <input type="text" name="species_scientific[]"></label>
    `;
    container.appendChild(newEntry);
  }
</script>

    <!-- FOOTER -->
  <footer class="bg-gray-200 text-sm text-center p-4 mt-12">
    © 2025 TIR-ific Network. All rights reserved.<br />
    Connecting the world through thermal insights.
  </footer>

</body>
</html>
